

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ROS Installation &mdash; yumipy 0.0.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="yumipy 0.0.1 documentation" href="../index.html"/>
        <link rel="next" title="Exceptions" href="../api/exceptions.html"/>
        <link rel="prev" title="Berkeley AutoLab yumipy Documentation" href="../index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> yumipy
          

          
          </a>

          
            
            
              <div class="version">
                0.0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installation Guide</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">ROS Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#install-autolab-dependencies">1. Install AUTOLAB dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#clone-the-repository">2. Clone the repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="#build-the-catkin-package">3. Build the catkin package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#python-only-installation">Python-Only Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">1. Install AUTOLAB dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id4">2. Clone the repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="#run-python-installation-script">3. Run Python installation script</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#rapid-server-installation">RAPID Server Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="#quick-start">Quick Start</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#start-the-rapid-server">1. Start the RAPID Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="#calibrate-the-grippers">2. Calibrate the Grippers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#test-the-installation">3. Test the Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#start-the-arms-service-ros-installation-only">4. Start the Arms Service (ROS Installation Only)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#run-a-python-example">5. Run a Python Example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li class="toctree-l1"><a class="reference internal" href="#documentation">Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#building">Building</a></li>
<li class="toctree-l2"><a class="reference internal" href="#deploying">Deploying</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/exceptions.html">Exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/logging.html">Streaming Information from the Robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/motion_planning.html">Client-Side Motion Planning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/robot.html">Controlling the Robot</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">yumipy</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>ROS Installation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/install/install.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ros-installation">
<h1>ROS Installation<a class="headerlink" href="#ros-installation" title="Permalink to this headline">¶</a></h1>
<p>To use the yumi-over-ros functionality, yumipy must be installed as a catkin_package.
The <cite>yumipy</cite> package has been tested for ROS Jade and may not work in other versions.</p>
<div class="section" id="install-autolab-dependencies">
<h2>1. Install AUTOLAB dependencies<a class="headerlink" href="#install-autolab-dependencies" title="Permalink to this headline">¶</a></h2>
<p>Install the <a class="reference external" href="https://github.com/BerkeleyAutomation/core">AUTOLAB core</a> module by following <a class="reference external" href="https://berkeleyautomation.github.io/core/install/install.html">the installation instructions</a>.</p>
</div>
<div class="section" id="clone-the-repository">
<h2>2. Clone the repository<a class="headerlink" href="#clone-the-repository" title="Permalink to this headline">¶</a></h2>
<p>First <a class="reference external" href="http://wiki.ros.org/catkin/Tutorials/create_a_workspace">create a catkin workspace</a> if you do not already have one.
Then clone the repository in your workspace</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cd {PATH_TO_YOUR_CATKIN_WORKSPACE}/src
$ git clone https://github.com/BerkeleyAutomation/yumipy.git
</pre></div>
</div>
</div>
<div class="section" id="build-the-catkin-package">
<h2>3. Build the catkin package<a class="headerlink" href="#build-the-catkin-package" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>Now build the package and re-source the ROS bash environment ::</dt>
<dd>$ cd {PATH_TO_YOUR_CATKIN_WORKSPACE}
$ catkin_make
$ . devel/setup.bash</dd>
</dl>
<p>and yumipy will be active as a catkin package. Note that this DOES NOT persist across terminal sessions.</p>
</div>
</div>
<div class="section" id="python-only-installation">
<h1>Python-Only Installation<a class="headerlink" href="#python-only-installation" title="Permalink to this headline">¶</a></h1>
<p>The yumipy package can also be used without ROS.
Note that the <cite>yumipy</cite> module is known to work for Python 2.7 and has not been tested for Python 3.</p>
<div class="section" id="id1">
<h2>1. Install AUTOLAB dependencies<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>Install the <a class="reference external" href="https://github.com/BerkeleyAutomation/core">AUTOLAB core</a> module by following <a class="reference external" href="https://berkeleyautomation.github.io/core/install/install.html">the installation instructions</a>.</p>
</div>
<div class="section" id="id4">
<h2>2. Clone the repository<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<p>You can clone or download our source code from <a class="reference external" href="https://github.com/BerkeleyAutomation/yumipy">Github</a>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ git clone https://github.com/BerkeleyAutomation/yumipy.git
</pre></div>
</div>
</div>
<div class="section" id="run-python-installation-script">
<h2>3. Run Python installation script<a class="headerlink" href="#run-python-installation-script" title="Permalink to this headline">¶</a></h2>
<p>To install <cite>yumipy</cite> in your current Python environment, simply
change directories into the <cite>yumipy</cite> repository and run</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ python setup.py install
</pre></div>
</div>
<p>or</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ pip install -r requirements.txt
</pre></div>
</div>
<p>Alternatively, you can run</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ pip install /path/to/yumipy
</pre></div>
</div>
<p>to install <cite>yumipy</cite> from anywhere.</p>
</div>
</div>
<div class="section" id="rapid-server-installation">
<h1>RAPID Server Installation<a class="headerlink" href="#rapid-server-installation" title="Permalink to this headline">¶</a></h1>
<p>To install the RAPID Server on the ABB YuMi:</p>
<ol class="arabic simple">
<li>Connect YuMi (XP23 Service Port) to your machine via an Ethernet cable</li>
<li>Open ABB Robot Studio &gt; Controller Tab</li>
<li>Add Controller &gt; One Click Connect</li>
<li>Switch YuMi to Manual Mode</li>
<li>In the controller tab, Request Write Access</li>
<li>Unzip RAPID/YuMi_Backup_Stable.zip</li>
<li>Backup down arrow &gt; Restore from Backup &gt; Select the unzipped folder</li>
<li>Proceed with restoring backup</li>
</ol>
</div>
<div class="section" id="quick-start">
<h1>Quick Start<a class="headerlink" href="#quick-start" title="Permalink to this headline">¶</a></h1>
<p>First install yumipy is as either as a ROS catkin package or standalone in Python, and install the RAPID server.
Turn the robot on and make sure that your computer is connected to the service port of the YuMi via Ethernet.</p>
<div class="section" id="start-the-rapid-server">
<h2>1. Start the RAPID Server<a class="headerlink" href="#start-the-rapid-server" title="Permalink to this headline">¶</a></h2>
<p>To run the RAPID server, through the FlexPendant:</p>
<ol class="arabic simple">
<li>Turn Motors On</li>
<li>Change to AUTO Mode</li>
<li>Set Program Pointer to Main</li>
<li>Click &#8220;Play&#8221; to run server</li>
</ol>
<p>Note that if you use our provided backup, you can use the custom buttons on the
FlexPendant to do the following:</p>
<ul class="simple">
<li>Three bars - toggle motors on/off</li>
<li>Two bars - toggle auto/manual mode</li>
<li>One bar - set program pointer to main</li>
</ul>
<p>You only need to run the RAPID server if you&#8217;re using the YuMiArm or YuMiRobot
objects. You can run YuMiSubcriber anytime as long as the YuMi is on and connected
to your machine.</p>
<p>You can edit the server code in SERVER_LEFT and SERVER_RIGHT.mod in RobotStudio.
To edit the logger code that provide logging capabilities to the YuMiSubscriber,
you must change their respective tasks from semi-static to static, restart
the robot, make your edits, change them back to semi-static, then restart
the robot again.</p>
</div>
<div class="section" id="calibrate-the-grippers">
<h2>2. Calibrate the Grippers<a class="headerlink" href="#calibrate-the-grippers" title="Permalink to this headline">¶</a></h2>
<p>Make sure the grippers are calibrated before using the arms</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ python tools/calibrate_grippers.py
</pre></div>
</div>
</div>
<div class="section" id="test-the-installation">
<h2>3. Test the Installation<a class="headerlink" href="#test-the-installation" title="Permalink to this headline">¶</a></h2>
<p>To test your installation, run:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ python setup.py test
</pre></div>
</div>
<p>with the robot on and calibrated.</p>
<p>We highly recommend testing before using the module.</p>
</div>
<div class="section" id="start-the-arms-service-ros-installation-only">
<h2>4. Start the Arms Service (ROS Installation Only)<a class="headerlink" href="#start-the-arms-service-ros-installation-only" title="Permalink to this headline">¶</a></h2>
<p>After doing this, in order to run the local server, run</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ rosrun yumipy yumi_arms.launch
</pre></div>
</div>
<p>This will start servers for the two arms.</p>
<p>After doing this, we can initialize a yumi remote interface:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">yumipy</span> <span class="kn">import</span> <span class="n">YuMiRobot</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">YuMiRobot</span><span class="p">(</span><span class="n">arm_type</span><span class="o">=</span><span class="s1">&#39;remote&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="run-a-python-example">
<h2>5. Run a Python Example<a class="headerlink" href="#run-a-python-example" title="Permalink to this headline">¶</a></h2>
<p>Now let&#8217;s move the right arm 5cm forward and 5cm backward to the starting point.</p>
<p>First, create a YuMiRobot object that communicates over ROS:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">yumipy</span> <span class="kn">import</span> <span class="n">YuMiRobot</span>
<span class="c1"># start the robot interface</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">YuMiRobot</span><span class="p">(</span><span class="n">arm_type</span><span class="o">=</span><span class="s1">&#39;remote&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If you installed the Python-only version then you can spin up an arm as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">yumipy</span> <span class="kn">import</span> <span class="n">YuMiRobot</span>
<span class="c1"># start the robot interface</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">YuMiRobot</span><span class="p">()</span>
</pre></div>
</div>
<p>Now move the arms!
.. code-block:: python</p>
<blockquote>
<div><p># getting the current pose of the right end effector
pose = y.right.get_pose()</p>
<p># move right arm forward by 5cm using goto_pose
pose.translation[0] += 0.05
y.right.goto_pose(pose)</p>
<p># move right arm back by 5cm using move delta
y.right.goto_pose_delta((-0.05,0,0))</p>
</div></blockquote>
<ol class="arabic simple" start="5">
<li>Run a Python Example</li>
</ol>
</div>
</div>
<div class="section" id="dependencies">
<h1>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h1>
<p>The <cite>yumipy</cite> module depends on the Berkeley AutoLab&#8217;s <a class="reference external" href="https://github.com/BerkeleyAutomation/core">core</a> module,
which can be installed using <cite>pip install</cite> on the source repo.</p>
<p>Any other dependencies will be installed automatically when <cite>yumipy</cite> is
installed with <cite>pip</cite>.</p>
<p>To use the remote yumi functionality, <a class="reference external" href="http://wiki.ros.org/">ROS</a> is needed.</p>
<p>This package was tested in ROS Jade. Other versions may or may not work.</p>
</div>
<div class="section" id="documentation">
<h1>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="building">
<h2>Building<a class="headerlink" href="#building" title="Permalink to this headline">¶</a></h2>
<p>Building <cite>yumipy</cite>&#8216;s documentation requires a few extra dependencies &#8211;
specifically, <a class="reference external" href="http://www.sphinx-doc.org/en/1.4.8/">sphinx</a> and a few plugins.</p>
<p>To install the dependencies required, simply run</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ pip install -r docs_requirements.txt
</pre></div>
</div>
<p>Then, go to the <cite>docs</cite> directory and run <cite>make</cite> with the appropriate target.
For example,</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cd docs/
$ make html
</pre></div>
</div>
<p>will generate a set of web pages. Any documentation files
generated in this manner can be found in <cite>docs/build</cite>.</p>
</div>
<div class="section" id="deploying">
<h2>Deploying<a class="headerlink" href="#deploying" title="Permalink to this headline">¶</a></h2>
<p>To deploy documentation to the Github Pages site for the repository,
simply push any changes to the documentation source to master
and then run</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ . gh_deploy.sh
</pre></div>
</div>
<p>from the <cite>docs</cite> folder. This script will automatically checkout the
<code class="docutils literal"><span class="pre">gh-pages</span></code> branch, build the documentation from source, and push it
to Github.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../api/exceptions.html" class="btn btn-neutral float-right" title="Exceptions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../index.html" class="btn btn-neutral" title="Berkeley AutoLab yumipy Documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Jacky Liang.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>